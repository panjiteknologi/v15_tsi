# -*- coding: utf-8 -*-
from odoo import models, fields, api
from datetime import datetime

class pentest_pentest(models.Model):
    _name           = 'pentest.pentest'
    _inherit        = 'mail.thread'
    _description    = 'Pentest'
    _rec_name       = 'nomor_dokumen'

    nomor_dokumen   = fields.Char(string="No Dokumen", required=True)
    nomor_revisi    = fields.Char(string="No Revisi", required=True)
    tanggal         = fields.Date(string="Tanggal")
    subject         = fields.Char(string="Subject")
    tipe            = fields.Char(string="Tipe")
    pic             = fields.Many2one('hr.employee', ondelete='cascade', string="Auditor")
    departemen      = fields.Many2one('hr.department', ondelete='cascade', required=True)
    tested_by       = fields.Char(string="Tested By")
    note            = fields.Text(string="Notes")
    item_line       = fields.One2many('pentest.item_line', 'item_line_id', string='Identifikasi')

class pentest_item_line(models.Model):
    _name           = 'pentest.item_line'
    _description    = 'Pentest Line'
    item_line_id    = fields.Many2one('pentest.pentest', ondelete='cascade')
    title           = fields.Char(string="Title")
    description     = fields.Text(string="Description")
    category        = fields.Selection(selection=[('critical', 'CRITICAL'),('high', 'HIGH'),('medium', 'MEDIUM'),('low', 'LOW')], string="Category", required=True)
    risk            = fields.Text(string="Risk")
    recommendation  = fields.Char(string="Recommendation")
    notes           = fields.Text(string="Notes")
    status          = fields.Selection(selection=[('open', 'OPEN'),('close', 'CLOSE')], string="Status", required=True)
    file_bin        = fields.Binary('Attachment')
    file_name       = fields.Char('Filename')
